<h1>Profile</h1>
<p *ngIf="userInfoError" class="user-info-error error-text">
  Error: <code>{{ userInfoError }}</code>
</p>
<ul *ngIf="userInfo" class="user-info">
  <li>{{ userInfo.username }}</li>
  <li>{{ userInfo.email }}</li>
  <li>{{ userInfo.join_time | date }}</li>
</ul>
<div class="profile-form-group">
  <h3>Change your username</h3>
  <form
    #setUsernameForm="ngForm"
    (ngSubmit)="onSetUsernameSubmit(setUsernameForm.value)"
  >
    <div class="form-group">
      <label for="username" class="form-label">New username</label>
      <input
        type="text"
        class="form-control"
        id="username"
        name="username"
        maxlength="63"
        value="{{ userInfo ? userInfo.username : '' }}"
        required
        ngModel
      />
    </div>
    <button
      type="submit"
      class="btn button-primary mt-1 mb-2"
      [disabled]="submittingUsernameForm"
    >
      Change username
    </button>
    <div class="mb-2">
      <small *ngIf="setUsernameError" class="error-text">{{
        setUsernameError
      }}</small>
    </div>
  </form>
</div>
<div class="profile-form-group">
  <h3>Change your password</h3>
  <form
    #setPasswordForm="ngForm"
    (ngSubmit)="onSetPasswordSubmit(setPasswordForm.value)"
  >
    <div class="form-group">
      <label for="password" class="form-label">New password</label>
      <input
        type="password"
        class="form-control"
        id="password"
        name="password"
        maxlength="255"
        required
        ngModel
      />
    </div>
    <div class="form-group">
      <label for="confirmPassword" class="form-label"
        >Confirm new password</label
      >
      <input
        type="password"
        class="form-control"
        id="confirmPassword"
        name="confirmPassword"
        maxlength="255"
        required
        ngModel
      />
    </div>
    <button
      type="submit"
      class="btn button-primary mt-1 mb-2"
      [disabled]="submittingPasswordForm"
    >
      Change password
    </button>
    <div class="mb-2">
      <small *ngIf="setPasswordError" class="error-text">{{
        setPasswordError
      }}</small>
    </div>
  </form>
</div>
